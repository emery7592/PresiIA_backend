# =============================================================================
# VARAIN BACKEND - REQUIREMENTS.TXT
# =============================================================================
# Fichier optimisé avec toutes les dépendances nécessaires
# pour le projet Varain Backend (FastAPI + PostgreSQL + Stripe + OpenAI + RAG)
# =============================================================================

# =============================================================================
# WEB FRAMEWORK & API
# =============================================================================
fastapi>=0.104.0,<0.116.0
uvicorn[standard]>=0.24.0,<0.33.0
pydantic[email]>=2.5.0,<2.11.0
python-multipart>=0.0.6
fastapi-mail==1.4.1
# IAP Verification
google-auth>=2.23.0,<3.0.0
google-auth-oauthlib>=1.1.0,<2.0.0
google-auth-httplib2>=0.1.1,<1.0.0
# =============================================================================
# DATABASE & ORM
# =============================================================================
sqlalchemy>=2.0.0,<2.1.0
psycopg2-binary>=2.9.0,<3.0.0
alembic>=1.13.0,<2.0.0

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
passlib[bcrypt]==1.7.4
bcrypt==4.0.1
python-jose[cryptography]>=3.3.0,<4.0.0
python-dotenv>=1.0.0,<2.0.0
email-validator>=2.1.0,<3.0.0

# =============================================================================
# PAYMENT PROCESSING
# =============================================================================
stripe>=7.0.0,<11.0.0

# =============================================================================
# AI & MACHINE LEARNING (Optimisé pour serveur 1GB)
# =============================================================================
openai>=1.30.0,<2.0.0
sentence-transformers>=2.2.0,<4.0.0  # Commenté temporairement (RAM)
faiss-cpu>=1.7.0,<2.0.0  # Commenté temporairement (RAM)
transformers>=4.30.0,<5.0.0  # Commenté temporairement (RAM)
torch>=2.0.0,<3.0.0  # Commenté temporairement (RAM)
numpy>=1.24.0,<2.0.0
tiktoken>=0.5.0,<1.0.0
httpx>=0.25.0

# =============================================================================
# AUDIO & VIDEO PROCESSING (Optionnel)
# =============================================================================
openai-whisper>=20231117  # Commenté temporairement (RAM)
 moviepy>=1.0.0,<2.0.0  # Commenté temporairement (RAM)
pydub>=0.25.0,<1.0.0  # Commenté temporairement (RAM)

# =============================================================================
# DOCUMENT PROCESSING
# =============================================================================
pypdf>=3.0.0,<6.0.0
reportlab>=4.0.0,<5.0.0

# =============================================================================
# WEB INTERFACE (Optionnel)
# =============================================================================
gradio>=4.0.0,<6.0.0  # Commenté temporairement (RAM)

# =============================================================================
# HTTP & REQUESTS
# =============================================================================
httpx>=0.25.0,<1.0.0
requests>=2.31.0,<3.0.0
aiofiles>=23.0.0,<25.0.0

# =============================================================================
# DATA PROCESSING
# =============================================================================
pandas>=2.0.0,<3.0.0
python-dateutil>=2.8.0,<3.0.0

# =============================================================================
# UTILITIES
# =============================================================================
click>=8.0.0,<9.0.0
typer>=0.9.0,<1.0.0
rich>=13.0.0,<14.0.0
tqdm>=4.65.0,<5.0.0

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================
pytest>=7.4.0,<9.0.0
pytest-asyncio>=0.21.0,<1.0.0

# =============================================================================
# SERVER & DEPLOYMENT
# =============================================================================
waitress>=2.1.0,<4.0.0
gunicorn>=21.0.0,<24.0.0

# =============================================================================
# NOTES D'INSTALLATION
# =============================================================================
# 1. Installation: pip install -r requirements.txt
# 2. Pour activer les fonctionnalités ML (après upgrade RAM):
#    Décommentez les lignes sentence-transformers, faiss-cpu, etc.
# 3. Variables d'environnement requises dans .env:
#    - DATABASE_URL
#    - JWT_SECRET_KEY
#    - STRIPE_SECRET_KEY
#    - STRIPE_WEBHOOK_SECRET
#    - STRIPE_PRICE_ID
#    - OPENAI_API_KEY (optionnel)
# =============================================================================